import { StatusBar } from 'expo-status-bar';
import { StyleSheet, Text, View } from 'react-native';
import useChat from './utils/useChat';
import Chats from './components/Chats';
import JoinRoom from './components/JoinRoom';
//import liraries
import React, { Component } from 'react';




type MyProps = {
  // using `interface` is also ok

};
type MyState = {
  userExists: boolean
  user: { username: string;room: string;} 
  messages: any[]
};

export default class App extends Component <MyProps, MyState> {
  constructor(props:any) {
    super(props)
  
    this.state = {
     userExists:true,
     user:{ username:"",room:"general"},
     messages:[],
    

    }
  }
  sendMessage=()=>{

  }
  render() 
  {
  
  const setUser =(value:any) => {
    this.setState({
    ...this.state,user:value
  })}
  const setUserExists =(value:any) => {
    this.setState({
    ...this.state,userExists:value
  })}


  return (
   <View style={styles.container}>
    <View style={styles.status}>
    <StatusBar style="auto" />
    </View>

      <View style={styles.chats}>
      {this.state.userExists?<Chats user={this.state.user} messages={this.state.messages} 
      sendMessage={this.sendMessage.bind(this)}/>:
      <JoinRoom setUser={setUser} setUserExists={setUserExists}/>}
      </View>
      </View>
  )}
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: '#fff',
    alignItems: 'center',
    justifyContent: 'flex-end',
    height:'100%'

  },
  status: {
   alignItems: 'center',
    justifyContent: 'flex-end',
    height:'5%',
    width:'100%',
  },
  chats: {
   backgroundColor: '#fff',
    alignItems: 'center',
    justifyContent: 'flex-end',
    height:'95%',
    width:'100%',
  },

});









